"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[143],{16371:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(8081),a=i.n(n),l=i(23645),o=i.n(l)()(a());o.push([e.id,".mw-app-wsconnectiondialog{background:#111013;border-radius:8px;display:flex;align-items:center;justify-content:center;height:100%}",""]);const s=o},17696:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(8081),a=i.n(n),l=i(23645),o=i.n(l)()(a());o.push([e.id,".mw-app-relationship-canvas{width:100%;height:100%;user-select:none;-moz-user-select:none;-webkit-user-select:none}.mw-app-relationship-canvas.creating-bulk{cursor:copy}.mw-app-relationship-canvas .selection-box{stroke:#f2f1f3;fill:rgba(255,255,255,.1);stroke-width:2px}.mw-app-relationship-canvas .canvas-welcome-text{text-anchor:middle;font-size:1.7em;fill:#545260}.mw-app-relationship-canvas .mwe-snap-zone{fill:#242329}",""]);const s=o},72289:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(8081),a=i.n(n),l=i(23645),o=i.n(l)()(a());o.push([e.id,".mw-app-relationship-entity .mw-block-content-section{margin:2px;border-radius:8px;background:#111013;padding:20px 30px}.mw-app-relationship-entity .mw-block-content-section.in-edit-mode{padding:10px}.mw-app-relationship-entity .mw-block-content-section.in-edit-mode textarea{height:100px}.mw-app-relationship-entity .mw-block-content-section pre{position:relative;top:auto;left:auto;transform:none}.mw-app-relationship-entity{cursor:default;transition:all .5s}.mw-app-relationship-entity rect,.mw-app-relationship-entity foreignObject{transition:width .5s,height .5s}.mw-app-relationship-entity.eic-skip-tween{transition:none}.mw-app-relationship-entity.eic-skip-tween rect,.mw-app-relationship-entity.eic-skip-tween foreignObject{transition:none}.mw-app-relationship-entity .eic-entity-rect{stroke:#545260;fill:#111013}.mw-app-relationship-entity .eic-entity-displaying-preview{opacity:0;transition:transform .2s,opacity .2s;transform:translateX(5px)}.mw-app-relationship-entity .eic-entity-displaying-preview.is-visible{transform:translate(5px, -20px);opacity:1}.mw-app-relationship-entity .eic-entity-displaying-preview rect{rx:5px;width:100px;height:25px;fill:#b45f88}.mw-app-relationship-entity .eic-entity-displaying-preview text{transform:translate(50px, 12.5px);text-anchor:middle;dominant-baseline:middle;fill:#111013;font-weight:bold}.mw-app-relationship-entity body{width:100%;height:100%;background:none;scrollbar-color:#545260 rgba(0,0,0,.2)}.mw-app-relationship-entity body::-webkit-scrollbar{width:10px;height:10px}.mw-app-relationship-entity body::-webkit-scrollbar-thumb{background:#545260;border-radius:6px;border:1px solid #3b3943;transition:.4s}.mw-app-relationship-entity body::-webkit-scrollbar-thumb:hover{background-color:#848294}.mw-app-relationship-entity body::-webkit-scrollbar-track{background:rgba(0,0,0,.2);border-radius:6px}.mw-app-relationship-entity body.expanded{overflow-x:hidden;height:auto;background:linear-gradient(88.47deg, hsl(331deg, 36%, 54%) 16.54%, hsl(275deg, 52%, 21%) 80.98%);border-radius:8px}.mw-app-relationship-entity body .resize-grid{width:100%;height:100%;display:grid;grid-template-columns:10px 1fr 10px;grid-template-rows:10px 1fr 10px}.mw-app-relationship-entity body .resize-grid.resizable .resize-nw{cursor:nwse-resize}.mw-app-relationship-entity body .resize-grid.resizable .resize-n{cursor:ns-resize}.mw-app-relationship-entity body .resize-grid.resizable .resize-ne{cursor:nesw-resize}.mw-app-relationship-entity body .resize-grid.resizable .resize-w{cursor:ew-resize}.mw-app-relationship-entity body .resize-grid.resizable .resize-e{cursor:ew-resize}.mw-app-relationship-entity body .resize-grid.resizable .resize-sw{cursor:nesw-resize}.mw-app-relationship-entity body .resize-grid.resizable .resize-s{cursor:ns-resize}.mw-app-relationship-entity body .resize-grid.resizable .resize-se{cursor:nwse-resize}.mw-app-relationship-entity body .resize-grid .resize-handle{z-index:1}",""]);const s=o},8275:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(8081),a=i.n(n),l=i(23645),o=i.n(l)()(a());o.push([e.id,".mw-app-relationship-entitytray .entity-tray-background{fill:#111013}.mw-app-relationship-entitytray .mw-svg-magnifyingglass.show-active{stroke:#b45f88}.mw-app-relationship-entitytray .mw-icon{cursor:pointer}.mw-app-relationship-entitytray .mw-icon:hover:not(.show-active){stroke:#f2f1f3}.mw-app-relationship-entitytray .mw-magnifying-wrapper{transform:translate(10px, 10px)}.mw-app-relationship-entitytray .mw-hierarchy-wrapper{transform:translate(40px, 10px)}",""]);const s=o},68854:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(8081),a=i.n(n),l=i(23645),o=i.n(l)()(a());o.push([e.id,".mw-app-relationship-entity .mw-block-content-section{margin:2px;border-radius:8px;background:#111013;padding:20px 30px}.mw-app-relationship-entity .mw-block-content-section.in-edit-mode{padding:10px}.mw-app-relationship-entity .mw-block-content-section.in-edit-mode textarea{height:100px}.mw-app-relationship-entity .mw-block-content-section pre{position:relative;top:auto;left:auto;transform:none}.mw-app-relationship-expandedentity{width:600px;user-select:text;-moz-user-select:text;-webkit-user-select:text}.mw-app-relationship-expandedentity .add-classifications-fields{font-size:16px;color:#78758a;display:grid;grid-template-columns:auto 1fr;row-gap:.5em;column-gap:15px}.mw-app-relationship-expandedentity .add-classifications-fields>.title-col{grid-column-start:1;grid-column-end:2}.mw-app-relationship-expandedentity .add-classifications-fields>.content-col{grid-column-start:2;grid-column-end:3}.mw-app-relationship-expandedentity .add-classifications-fields .mw-checkbox{display:inline-block;margin-right:15px}.mw-app-relationship-expandedentity .add-classifications-fields .mw-svg-pencil{margin-right:5px}.mw-app-relationship-expandedentity .add-classifications-fields>.title-col>*{vertical-align:middle}.mw-app-relationship-expandedentity .add-classifications-fields>.title-col.clickable{cursor:pointer}.mw-app-relationship-expandedentity .add-classifications-fields>.title-col.clickable:hover{color:#f2f1f3}.mw-app-relationship-expandedentity .add-classifications-fields>.title-col.clickable:hover .mw-svg-pencil{stroke:#f2f1f3}.mw-app-relationship-expandedentity .add-classifications-fields .field-display{color:#f2f1f3;margin-right:15px}.mw-app-relationship-expandedentity .add-classifications-fields .no-field-display{color:#78758a}.mw-app-relationship-expandedentity .mw-classification-flex{display:flex}.mw-app-relationship-expandedentity .mw-classification-flex>div:first-child{color:#78758a;flex-grow:0;flex-shrink:0;margin-right:10px;margin-left:-20px;font-size:1rem;writing-mode:vertical-rl;text-align:center}.mw-app-relationship-expandedentity .mw-classification-flex>div:last-child{flex-grow:1;flex-shrink:1;min-width:0;border-left:1px dashed #78758a;border-radius:16px;padding-left:20px}.mw-app-relationship-expandedentity .field-row:first-child{margin-top:10px}.mw-app-relationship-expandedentity .field-row:last-child{margin-bottom:10px}.mw-app-relationship-expandedentity .field-row{margin:20px 0}.mw-app-relationship-expandedentity .field-row .field-name-col{width:35%;display:inline-block}.mw-app-relationship-expandedentity .field-row .field-component-col{width:65%;display:inline-block}.mw-app-relationship-expandedentity .field-row .field-name-col{vertical-align:top;color:#78758a;font-size:18px}.mw-app-relationship-expandedentity .field-row .mw-markdowneditor .title{color:#78758a;font-size:18px}.mw-app-relationship-expandedentity .mw-no-facs-to-display{color:#78758a}",""]);const s=o},47873:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(8081),a=i.n(n),l=i(23645),o=i.n(l)()(a());o.push([e.id,".mw-app-relationship-link.selected .connecting-line{stroke:#f2f1f3;fill:#f2f1f3}.mw-app-relationship-link line{stroke:#545260}.mw-app-relationship-link polygon{stroke:#545260;stroke-width:6;stroke-linejoin:round;fill:#545260}.mw-app-relationship-link .invisible-line{stroke:rgba(0,0,0,0)}.mw-app-relationship-link .delete-circle{opacity:0;transition:.1s;transition-delay:.1s;cursor:pointer;fill:#d53434}.mw-app-relationship-link .delete-circle line{stroke-width:5;stroke:#302f37}.mw-app-relationship-link:hover .delete-circle{opacity:1}",""]);const s=o},67819:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(8081),a=i.n(n),l=i(23645),o=i.n(l)()(a());o.push([e.id,".mw-app-relationship-textcontent{height:100%}.mw-app-relationship-textcontent textarea{width:100%;height:100%;background:rgba(0,0,0,0);border:none;resize:none;color:#f2f1f3;text-align:center;margin:0;padding:0;overflow:hidden}.mw-app-relationship-textcontent{position:relative}.mw-app-relationship-textcontent pre{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);text-align:center;margin:0;padding:0;width:100%;white-space:pre-line}",""]);const s=o},73154:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(8081),a=i.n(n),l=i(23645),o=i.n(l)()(a());o.push([e.id,".mw-app-relationship{height:100%}",""]);const s=o},46011:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(8081),a=i.n(n),l=i(23645),o=i.n(l)()(a());o.push([e.id,".mwe-config-heading{margin:0;padding:0;color:#78758a}.mwe-config-heading.mwm-inline{display:inline-block;padding-right:20px}.mwe-selected-but-filtered{background:#302f37;border-radius:12px;border:1px solid #111013;box-shadow:inset 0px 6px 6px rgba(0,0,0,.25);margin:16px}.mwe-selected-but-filtered p{margin:0;padding:10px}.mwe-selected-but-filtered .mwe-filtered-block-section{padding:10px;display:flex;gap:10px;align-items:flex-start;align-content:flex-start;overflow-x:auto;scrollbar-color:#545260 rgba(0,0,0,.2)}.mwe-selected-but-filtered .mwe-filtered-block-section::-webkit-scrollbar{width:10px;height:10px}.mwe-selected-but-filtered .mwe-filtered-block-section::-webkit-scrollbar-thumb{background:#545260;border-radius:6px;border:1px solid #3b3943;transition:.4s}.mwe-selected-but-filtered .mwe-filtered-block-section::-webkit-scrollbar-thumb:hover{background-color:#848294}.mwe-selected-but-filtered .mwe-filtered-block-section::-webkit-scrollbar-track{background:rgba(0,0,0,.2);border-radius:6px}.mwe-selected-but-filtered .mwe-filtered-block-section .mwe-block{margin:5px;width:300px;flex-grow:0;flex-shrink:0}.mwe-block{position:relative;margin:10px;cursor:pointer;text-align:center;border-radius:20px;border:3px solid #545260;background:#111013;color:#f2f1f3}.mwe-block .mwe-breadcrumbs{color:#9391a1;background:rgba(17,16,19,.9);border-radius:17px 17px 0 0;border-bottom:1px solid rgba(120,117,138,.4);padding:5px;margin-bottom:-10px}.mwe-block .mwe-block-content{padding:25px 15px 25px 15px}.mwe-block.mwm-selected{box-shadow:0 0 15px 3px #f2f1f3}.mw-app-viewcontainer{position:absolute;height:100%;width:100%;overflow:hidden;z-index:5;transition:transform .4s;transform:translateY(-100%)}.mw-app-viewcontainer.is-open{transform:translateY(0%)}.mw-app-viewcontainer .mwe-view-contents-section{height:100%;width:100%}.mw-app-viewcontainer .mwe-view-config-wrapper{box-shadow:4px 4px 4px #111013;position:absolute;width:100%;padding-top:2px;background:linear-gradient(88.47deg, hsl(331deg, 36%, 54%) 16.54%, hsl(275deg, 52%, 21%) 80.98%);transition:transform .4s}.mw-app-viewcontainer .mwe-view-config-wrapper.is-visible{transform:translateY(-100%)}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section{background:#111013}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-config-tabs{position:absolute;transform:translateY(-100%);right:50px}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-config-tabs .mwe-config-tab{display:inline-block;background:#111013;padding:10px 20px;cursor:pointer}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-config-tabs .mwe-config-tab:not(:first-child){border-left:1px solid #545260}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-config-tabs .mwe-config-tab:hover{background-color:#302f37}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-config-tabs .mwe-config-tab svg{padding:0 10px;transition:transform .8s;transform:rotate(0deg)}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-config-tabs .mwe-config-tab svg.is-rotated{transform:rotate(180deg)}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-view-config{margin:0 auto;padding:20px;background:#111013;max-width:1000px}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-view-config .mw-textbox{display:inline-block}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-view-config .mwe-config-content{max-height:50vh;overflow-y:auto;padding:20px}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-view-config .mwe-config-content>*{margin:20px 0}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-view-config .mwe-config-content .mw-app-filterconfig{margin:10px 50px}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-view-save-button-wrapper{background:linear-gradient(88.47deg, hsl(331deg, 36%, 54%) 16.54%, hsl(275deg, 52%, 21%) 80.98%);padding-top:1px}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-view-save-button-wrapper .mwe-view-save-buttons{background:#111013;padding:10px;text-align:right}.mw-app-viewcontainer .mwe-view-config-wrapper .mwe-view-config-section .mwe-view-save-button-wrapper .mwe-view-save-buttons button{margin:10px}",""]);const s=o},22686:(e,t,i)=>{i.d(t,{A:()=>c});var n=i(2262),a=i(95278),l=i(68952),o=i(81375),s=i(34151);function d(e,t,i,s){let d=(0,l.F)(),r=(0,a.useVueModals)(),c="edit-classifications",u=(0,n.qj)(JSON.parse(JSON.stringify({classificationIds:e,classificationDefs:t,fieldDefs:i,possibleValueDefs:s})));r.createOrUpdateModal({id:c,styleOverrides:{width:"900px"},layout:{componentName:"mw-vm-fixed-bottom",panes:{bottom:{name:"eic-savecancel",eventHandlers:{"mw-cancel":e=>{r.closeModal(c)},"mw-save":e=>{new o.O(d.rawState.currentViewData.boardId,u.classificationIds,u.classificationDefs,u.fieldDefs,u.possibleValueDefs).send(),r.closeModal(c)}}},main:{componentName:"eic-edit-classifications-dialog",componentData:u,styleOverrides:{"max-height":"500px"},eventHandlers:{}}}}})}function r(e,t,i){let n=(0,l.F)();new s.u(n.rawState.currentViewData.boardId,e,t,i).send()}function c(){return{openEditClassificationsDialog:d,setClassificationOnEntities:r}}},65687:(e,t,i)=>{i.d(t,{X:()=>w});var n=i(2262),a=i(95278),l=i(68952),o=i(52433),s=i(75930),d=i(93828),r=i(71849),c=i(80914);function u(e,t,i,o){let s=(0,l.F)(),r=(0,a.useVueModals)(),c="edit-fields",u=t,p=(0,n.qj)(JSON.parse(JSON.stringify({fieldDefs:t.map((e=>i[e])),possibleValueDefs:o}))),w=e;r.createOrUpdateModal({id:c,styleOverrides:{width:"850px"},layout:{componentName:"mw-vm-fixed-bottom",panes:{bottom:{name:"eic-savecancel",eventHandlers:{"mw-cancel":e=>{r.closeModal(c)},"mw-save":e=>{let t=p.fieldDefs.reduce(((e,t)=>(e[t.id]=t,e)),{}),i=p.fieldDefs.map((e=>e.id)),n=u.filter((e=>!p.fieldDefs.some((t=>t.id===e)))),a=p.fieldDefs.reduce(((e,t)=>{var i;return null===(i=t.possibleValueIds)||void 0===i||i.forEach((t=>{e[t]=p.possibleValueDefs[t]})),e}),{});new d.H(s.rawState.currentViewData.boardId,w,t,i,a,n).send(),r.closeModal(c)}}},main:{componentName:"eic-edit-fields-dialog",componentData:p,styleOverrides:{"max-height":"500px"},eventHandlers:{}}}}})}function p(e,t,i){const n=(0,l.F)(),a=(0,c.I)().fields(),d={};if(o.L5(i,["value","isSelected"]))e.forEach((e=>{let n=(0,s.oe)(s.fS.CHECKBOXES,e.fieldValues[t]);i.isSelected&&!n.includes(i.value)?d[e.id]=[...n,i.value]:i.isSelected?d[e.id]=n:d[e.id]=n.filter((e=>e!==i.value))}));else if(a.value[t].type===s.fS.DATETIME&&(""===i.date||""===i.time)&&e.length>1){let n=new Set,a=new Set;e.forEach((e=>{let i=(0,s.oe)(s.fS.DATETIME,e.fieldValues[t]);n.add(i.date),a.add(i.time)}));const l=1===n.size,o=1===a.size;e.forEach((e=>{let n=Object.assign({},i),a=(0,s.oe)(s.fS.DATETIME,e.fieldValues[t]);""!==n.date||l||(n.date=a.date),""!==n.time||o||(n.time=a.time),d[e.id]=n}))}else e.forEach((e=>{d[e.id]=i}));new r.i(n.rawState.currentViewData.boardId,t,d).send()}function w(){return{openEditFieldsDialog:u,setFieldValueOnEntities:p}}},19266:(e,t,i)=>{i.d(t,{T:()=>o});var n=i(66252),a=i(68952),l=i(74465);function o(){let e=(0,a.F)().currentAppPermissions();return{canEditBoardContents:(0,n.Fl)((()=>l.VT(e.value,["BOARD_OWNER","BOARD_EDIT_CONTENTS"]))),canEditBoardClassifications:(0,n.Fl)((()=>l.VT(e.value,["BOARD_OWNER","BOARD_EDIT_CLASSIFICATIONS"])))}}},96834:(e,t,i)=>{i.d(t,{L:()=>o,_:()=>n});var n,a=i(2262),l=i(66252);function o(){let e=(0,a.iH)(n.SE),t=(0,a.qj)({x:0,y:0}),i=(0,a.iH)(!1),o=(0,a.qj)({x:0,y:0}),s=(0,a.qj)({x:0,y:0}),d=(0,l.Fl)((()=>{let t={deltaX:0,deltaY:0,deltaWidth:0,deltaHeight:0};switch(e.value){case n.N:t.deltaY=s.y-o.y,t.deltaHeight=o.y-s.y;break;case n.NE:t.deltaWidth=s.x-o.x,t.deltaY=s.y-o.y,t.deltaHeight=o.y-s.y;break;case n.E:t.deltaWidth=s.x-o.x;break;case n.SE:t.deltaWidth=s.x-o.x,t.deltaHeight=s.y-o.y;break;case n.S:t.deltaHeight=s.y-o.y;break;case n.SW:t.deltaX=s.x-o.x,t.deltaWidth=o.x-s.x,t.deltaHeight=s.y-o.y;break;case n.W:t.deltaX=s.x-o.x,t.deltaWidth=o.x-s.x;break;case n.NW:t.deltaX=s.x-o.x,t.deltaWidth=o.x-s.x,t.deltaY=s.y-o.y,t.deltaHeight=o.y-s.y}return t}));return{isDragging:i,deltaDrag:d,setOffset:(e,i)=>{t.x=e,t.y=i},mouseDown:(n,a)=>{e.value=a,i.value=!0,o.x=n.clientX-t.x,o.y=n.clientY-t.y,s.x=n.clientX-t.x,s.y=n.clientY-t.y},mouseMove:e=>{i.value&&(s.x=e.clientX-t.x,s.y=e.clientY-t.y)},mouseUp:()=>{i.value=!1,o.x=0,o.y=0,s.x=0,s.y=0}}}!function(e){e[e.N=0]="N",e[e.NE=1]="NE",e[e.E=2]="E",e[e.SE=3]="SE",e[e.S=4]="S",e[e.SW=5]="SW",e[e.W=6]="W",e[e.NW=7]="NW"}(n||(n={}))},80914:(e,t,i)=>{i.d(t,{I:()=>o});var n=i(66252),a=i(17943),l=i(75930);function o(){let e=(0,a.o)();return{rawState:e.state.classificationData,classificationIds:()=>function(e){return(0,n.Fl)((()=>e.getters.classificationIds))}(e),classifications:()=>function(e){return(0,n.Fl)((()=>e.getters.classifications))}(e),fields:()=>function(e){return(0,n.Fl)((()=>e.getters.fields))}(e),possibleValues:()=>function(e){return(0,n.Fl)((()=>e.getters.possibleValues))}(e),classificationOptions:()=>function(e){return(0,n.Fl)((()=>Object.values(e.getters.classifications).map((e=>({value:e.id,display:e.name})))))}(e),classificationFieldPairOptions:t=>function(e,t){return(0,n.Fl)((()=>{let i=e.getters.fields;return Object.values(e.getters.classifications).reduce(((e,n)=>(e.push(...n.fieldIds.filter((e=>!t||t(i[e]))).map((e=>({value:e,display:`${n.name} > ${i[e].name}`})))),e)),[])}))}(e,t),getFieldTypeGivenFieldId:t=>function(e,t){return t?e.getters.fields[t].type:null}(e,t),getFieldDataTypeGivenFieldId:t=>function(e,t){return t?(0,l.lc)(e.getters.fields[t].type):null}(e,t),getPossibleValueOptsForField:t=>function(e,t){if(!t)return[];let i=e.getters.possibleValues;return e.getters.fields[t].possibleValueIds.map((e=>({value:e,display:i[e].name})))}(e,t),boardColors:()=>function(e){return(0,n.Fl)((()=>e.getters.boardColors))}(e)}}},80954:(e,t,i)=>{i.d(t,{$:()=>l});var n=i(66252),a=i(17943);function l(){let e=(0,a.o)();return{rawState:e.state.hierarchyData,visibleLinkPairs:()=>function(e){return(0,n.Fl)((()=>e.getters.visibleHierarchyLinkPairs))}(e),entityScales:()=>function(e){return(0,n.Fl)((()=>e.getters.entityScales))}(e),getSiblings:t=>function(e,t){let i=e.state.hierarchyData.hierarchy[t].parentEntityId;return void 0!==i?[...e.state.hierarchyData.hierarchy[i].childrenEntityIds]:[...e.getters.getTopLevelBlocks]}(e,t),getImmediateChildren:t=>function(e,t){return e.state.hierarchyData.hierarchy[t].childrenEntityIds}(e,t),getTransitiveDescendants:t=>function(e,t){return e.getters.getTransitiveDescendants(t)}(e,t),getParentChain:t=>function(e,t){return e.getters.getParentChain(t)}(e,t),setParent:(t,i)=>function(e,t,i){e.dispatch("setParent",{entityId:t,newParent:i})}(e,t,i),getParent:t=>function(e,t){var i;return null===(i=e.state.hierarchyData.hierarchy[t])||void 0===i?void 0:i.parentEntityId}(e,t)}}},74094:(e,t,i)=>{i.d(t,{N:()=>s});var n=i(66252),a=i(44586),l=i(17943),o=i(41367);function s(){let e=(0,l.o)();return{rawState:e.state.viewData,availableViews:t=>function(e,t){return(0,n.Fl)((()=>Object.values(e.state.viewData.availableViews).sort(((e,t)=>(""+e.name).localeCompare(t.name))).filter((e=>!t||e.type===t))))}(e,t),activeViewConfig:()=>function(e){return(0,n.Fl)((()=>e.state.viewData.activeViewConfig))}(e),displayedBlocks:()=>function(e){return(0,n.Fl)((()=>e.getters.displayedBlocks))}(e),prioritizedBlocks:()=>function(e){return(0,n.Fl)((()=>e.getters.prioritizedBlocks))}(e),createNewView:t=>function(e,t){let i={id:(0,a.Z)(),name:"",type:t,filter:{filters:[],conjunction:o.Xs.AND}};e.dispatch("openView",i)}(e,t),closeCurrentView:()=>function(e){e.dispatch("closeView")}(e)}}},63317:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var n=i(66252);const a={class:"mw-app-dynamicfield"};var l=i(75930),o=i(80914),s=i(29492);const d=(0,n.aZ)({props:{eicFieldDef:Object,possibleValueCounts:Object,keyPrefix:String,mwDisabled:Boolean},setup(e,t){let i=(0,o.I)().possibleValues();const a={[l.fS.TEXTBOX]:"eic-textbox",[l.fS.TEXT_EDITOR]:"eic-markdowneditor",[l.fS.DROPDOWN]:"eic-dropdown",[l.fS.RADIO_BUTTONS]:"eic-radiobutton",[l.fS.CHECKBOXES]:"eic-checkbox",[l.fS.DATE]:"eic-datetime",[l.fS.TIME]:"eic-datetime",[l.fS.DATETIME]:"eic-datetime"};function d(e){let t=new Set,i=new Set;e.forEach((e=>{if("null"!==e){let[n,a]=e.split(" ");t.add(n),i.add(a)}}));let n={date:"",time:""};return 1===t.size&&(n.date=t.values().next().value),1===i.size&&(n.time=i.values().next().value),n}function r(t,i){const n=`[${e.possibleValueCounts.pvCounts[t]}/${e.possibleValueCounts.outOf}]`,[a,o]=t.split(" ");return i===l.fS.DATE?`${a||"(no date)"} ${n}`:i===l.fS.TIME?`${o||"(no time)"} ${n}`:i===l.fS.DATETIME?`${a||"(no date)"} @ ${o||"(no time)"} ${n}`:`(Unrecognized value) ${n}`}return{elements:(0,n.Fl)((()=>{let t=e.eicFieldDef,n=[];if(["Dropdown","Radio Buttons","Checkboxes"].includes(e.eicFieldDef.type)){"Dropdown"===e.eicFieldDef.type&&Object.keys(e.possibleValueCounts.pvCounts).length>1&&n.push({pvId:void 0,pvName:"[various]",displayText:"[various]",isSelected:!0});let a=t.possibleValueIds.map((e=>i.value[e].name));for(let t of Object.keys(e.possibleValueCounts.pvCounts))if("null"!==t&&!a.includes(t)){let i=e.possibleValueCounts.pvCounts[t]===e.possibleValueCounts.outOf,a=t;!i&&e.possibleValueCounts.pvCounts[t]&&(a+=` [${e.possibleValueCounts.pvCounts[t]}/${e.possibleValueCounts.outOf}]`),n.push({pvId:void 0,pvName:t,displayText:a,isSelected:i})}for(let a of t.possibleValueIds){let t=i.value[a].name,l=e.possibleValueCounts.pvCounts[t]===e.possibleValueCounts.outOf,o=t;!l&&e.possibleValueCounts.pvCounts[t]&&(o+=` [${e.possibleValueCounts.pvCounts[t]}/${e.possibleValueCounts.outOf}]`),n.push({pvId:a,pvName:t,displayText:o,isSelected:l})}}let o=[],s=Object.keys(e.possibleValueCounts.pvCounts);switch(t.type){case l.fS.TEXTBOX:o.push({key:t.id+"-textbox",type:a[l.fS.TEXTBOX],data:{mwDisabled:e.mwDisabled},model:1!==s.length?"[various]":"null"!==s[0]?s[0]:""});break;case l.fS.TEXT_EDITOR:o.push({key:t.id+"-markdown",type:a[l.fS.TEXT_EDITOR],data:{mwDisabled:e.mwDisabled},model:1!==s.length?"[various]":"null"!==s[0]?s[0]:""});break;case l.fS.DROPDOWN:let i=n.find((e=>e.isSelected));o.push({key:t.id+"-dropdown",type:a[l.fS.DROPDOWN],data:{eicOptions:n.map((e=>({display:e.displayText,value:e.pvName}))),mwDisabled:e.mwDisabled},model:null==i?void 0:i.pvName});break;case l.fS.RADIO_BUTTONS:n.forEach(((i,s)=>{let d=n.find((e=>e.isSelected));o.push({key:t.id+"-rb-"+s,type:a[l.fS.RADIO_BUTTONS],data:{eicLabel:i.displayText,eicGroup:e.keyPrefix+t.id,eicRadioValue:i.pvName,mwDisabled:e.mwDisabled},model:null==d?void 0:d.pvName})}));break;case l.fS.CHECKBOXES:n.forEach((i=>{o.push({key:i.pvId||t.id+"-cb-"+i.pvName,type:a[l.fS.CHECKBOXES],data:{eicLabel:i.displayText,eicUnderlyingValue:i.pvName,mwDisabled:e.mwDisabled},model:i.isSelected})}));break;case l.fS.DATE:case l.fS.TIME:case l.fS.DATETIME:if(o.push({key:t.id+"-temporal",type:a[t.type],data:{mwFieldType:t.type,mwDisabled:e.mwDisabled},model:d(s)}),s.length>1){let i=[{display:"[various]",value:"[various]",disabled:!0}];i.push(...s.map((e=>({display:r(e,t.type),value:e})))),o.push({key:t.id+"-dropdown",type:a[l.fS.DROPDOWN],data:{eicOptions:i,mwDisabled:e.mwDisabled},model:"[various]"})}break;default:throw new Error("Unrecognized Field Type: "+t.type)}return o})),setValue:i=>{let n=i;if((0,l.lc)(e.eicFieldDef.type)===l.g.TEMPORAL&&(0,s.HD)(i)){let[e,t]=i.split(" ");n={date:e,time:t}}t.emit("eic-val-set",n)}}}}),r=(0,i(83744).Z)(d,[["render",function(e,t,i,l,o,s){return(0,n.wg)(),(0,n.iD)("div",a,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.elements,(i=>((0,n.wg)(),(0,n.j4)((0,n.LL)(i.type),(0,n.dG)({key:e.keyPrefix+i.key},i.data,{modelValue:i.model,"onUpdate:modelValue":e=>i.model=e,onEicValSet:t[0]||(t[0]=t=>e.setValue(t))}),null,16,["modelValue","onUpdate:modelValue"])))),128))])}]])},69559:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var n=i(66252),a=i(3577);const l={class:"mw-app-wsconnectiondialog"},o=(0,n.aZ)({props:{mwMessage:String},setup:()=>({})});var s=i(93379),d=i.n(s),r=i(7795),c=i.n(r),u=i(90569),p=i.n(u),w=i(3565),y=i.n(w),m=i(19216),g=i.n(m),v=i(44589),f=i.n(v),h=i(16371),x={};x.styleTagTransform=f(),x.setAttributes=y(),x.insert=p().bind(null,"head"),x.domAPI=c(),x.insertStyleElement=g(),d()(h.Z,x),h.Z&&h.Z.locals&&h.Z.locals;const b=(0,i(83744).Z)(o,[["render",function(e,t,i,o,s,d){return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("h2",null,(0,a.zw)(e.mwMessage),1)])}]])},25473:(e,t,i)=>{i.r(t),i.d(t,{default:()=>A});var n=i(66252),a=i(3577),l=i(49963);const o=["cx","cy","r"],s={key:2,class:"canvas-welcome-text","text-anchor":"middle",x:"0",y:"0"},d=["x","y","width","height"];var r=i(2262),c=i(50432),u=i(68952),p=i(80954),w=i(36194);const y=navigator.userAgent.includes("Mac");function m(){let e={data:{}},t=(0,r.qj)({x:0,y:0}),i=(0,r.iH)(!1),a=(0,r.qj)({x:0,y:0}),l=(0,r.qj)({x:0,y:0}),o=(0,n.Fl)((()=>({x:Math.min(a.x,l.x),y:Math.min(a.y,l.y),width:Math.abs(l.x-a.x),height:Math.abs(l.y-a.y)}))),s=(0,n.Fl)((()=>({deltaX:l.x-a.x,deltaY:l.y-a.y})));return{metadata:e,isDragging:i,boundingBox:o,deltaDrag:s,startCoords:a,currentCoords:l,setOffset:(e,i)=>{t.x=e,t.y=i},mouseDown:(n,o)=>{e.data=o,i.value=!0,a.x=n.clientX-t.x,a.y=n.clientY-t.y,l.x=n.clientX-t.x,l.y=n.clientY-t.y},mouseMove:e=>{i.value&&(l.x=e.clientX-t.x,l.y=e.clientY-t.y)},mouseUp:()=>{i.value=!1,a.x=0,a.y=0,l.x=0,l.y=0}}}var g=i(96834),v=i(74169),f=i(75975);const h=new w.ZP.Group;var x=i(19266),b=i(95610),k=i(61746),E=i(57664),D=i(11863),S=i(1031),T=i(85274),C=i(74094),z=i(74465);const V=(0,n.aZ)({props:{eicEntities:Object,eicLinks:Array},setup(e,t){let i=(0,c.V)(),a=(0,p.$)(),l=(0,u.F)(),o=(0,C.N)(),{canEditBoardContents:s}=(0,x.T)(),d=i.expandedEntityIds(),V=m(),B=m(),I=m(),O=(0,g.L)(),M=(0,v.q)(),F=(0,f.Y)(),j={sharedTweenGroup:h,updateGroup:function e(t){h&&h.getAll().length>0&&setTimeout((()=>{h&&h.getAll().length>0&&(requestAnimationFrame(e),null==h||h.update(t))}),1e3/60)},stopGroup:function(){null==h||h.removeAll()}},_=function(){let e,t=(0,r.qj)({x:0,y:0}),i=(0,n.Fl)((()=>t)),a=(0,n.Fl)((()=>`translate(${i.value.x}px, ${i.value.y}px)`)),l=(e,i)=>{t.x-=e,t.y-=i};return{deltaDrag:i,translateString:a,panTo:(i,n,a,l)=>{null==e||e.stop(),e=new w.ZP.Tween(t,l).easing(w.ZP.Easing.Quadratic.Out).to({x:i,y:n}).duration(a).start()},panBy:l,wheel:e=>{if(!((t=e).altKey||t.ctrlKey||t.shiftKey||t.metaKey)){let t=e.deltaX,i=e.deltaY;1===e.deltaMode&&(t*=30,i*=10),l(1*t,1*i)}var t}}}(),N=function(){let e=(0,r.iH)(null),t=(0,r.qj)({x:0,y:0}),i=null,n=null;return{recordEvent:a=>{e.value=a,t.x+=a.movementX,t.y+=a.movementY,null===i&&(i=window.setTimeout((()=>{n&&n(e.value,t.x,t.y),t={x:0,y:0},i=null}),25))},setCallback:e=>{n=e}}}(),q=!1,Z=(0,r.qj)({x:0,y:0,isSelected:!1}),R=(0,n.Fl)((()=>B.isDragging?{x:(B.currentCoords.x-_.deltaDrag.value.x)/W.scale.value,y:(B.currentCoords.y-_.deltaDrag.value.y)/W.scale.value,isSelected:!1}:{x:0,y:0})),H=(0,r.qj)({deltaX:0,deltaY:0}),P=(0,r.iH)(void 0),Y=(0,r.qj)({block:new b.JH("ghostBlock",new b.kB(0,0,b.mz,b.j$)),scale:1}),A=(0,r.iH)([]);function L(t,i,n){const a=10/n;let l=0;return t.map((t=>e.eicEntities[t].location)).reduce(((e,t)=>(e.push({x:t.x+t.width/2,y:t.y-i.height/2-a,scale:n,key:l++},{x:t.x+t.width/2,y:t.y+t.height+i.height/2+a,scale:n,key:l++},{x:t.x-i.width/2-a,y:t.y+t.height/2,scale:n,key:l++},{x:t.x+t.width+i.width/2+a,y:t.y+t.height/2,scale:n,key:l++}),e)),[])}function $(e,t,i,n){if(0===A.value.length)return{x:e,y:t};let a=A.value.map((i=>({x:i.x,y:i.y,d:Math.sqrt(Math.pow(i.x-e,2)+Math.pow(i.y-t,2))}))).sort(((e,t)=>e.d-t.d))[0];return Math.abs(a.x-e)<i/2&&Math.abs(a.y-t)<n/2?{x:a.x,y:a.y}:{x:e,y:t}}N.setCallback(((t,i,n)=>{if(V.mouseMove(t),B.mouseMove(t),I.mouseMove(t),O.mouseMove(t),B.isDragging.value&&"setCreateChild"===B.metadata.data.type){let e={x:R.value.x,y:R.value.y},t=B.metadata.data.sourceEntityId,i=U.value[t];const n=b.mz/(i+.5*i),a=b.j$/(i+.5*i);e=$(e.x,e.y,n,a),Y.block.location.x=e.x-Y.block.location.width/2,Y.block.location.y=e.y-Y.block.location.height/2}if(I.isDragging.value){const t=e.eicEntities[I.metadata.data.blockId];let i={x:t.location.x+t.location.width/2+I.deltaDrag.value.deltaX/W.scale.value,y:t.location.y+t.location.height/2+I.deltaDrag.value.deltaY/W.scale.value};i=$(i.x,i.y,t.location.width,t.location.height),H.deltaX=(i.x-(t.location.x+t.location.width/2))*W.scale.value,H.deltaY=(i.y-(t.location.y+t.location.height/2))*W.scale.value}!q||0===i&&0===n||(j.stopGroup(),_.panBy(-i,-n))}));let W=function(e){let t,i=(0,r.iH)(1),a=(0,r.qj)({x:0,y:0}),l=(0,n.Fl)((()=>`scale(${i.value})`)),o=(t,n)=>{let l=n.deltaY||n.deltaX;0===n.deltaMode&&(l/=30);let o=l*t;i.value+=i.value*o,i.value=Math.max(.05,i.value);let s=o*(n.clientX-a.x-e.deltaDrag.value.x),d=o*(n.clientY-a.y-e.deltaDrag.value.y);e.panBy(s,d)};return{scale:i,scaleString:l,setOffset:(e,t)=>{a.x=e,a.y=t},zoomTo:(e,n,a)=>{null==t||t.stop(),t=new w.ZP.Tween(i,a).easing(w.ZP.Easing.Quadratic.Out).to({value:e}).duration(n).start()},wheel:e=>{y&&e.ctrlKey&&o(-.2,e),e.shiftKey&&o(.08,e)}}}(_),X=0,U=a.entityScales();(0,n.JJ)("canvasPan",_.deltaDrag),(0,n.JJ)("canvasZoom",W.scale);let K=function(e,t){return{x:(e-_.deltaDrag.value.x)/W.scale.value,y:(t-_.deltaDrag.value.y-X)/W.scale.value}},G=function(e,t){return{dx:e/W.scale.value,dy:t/W.scale.value}},J=(0,r.iH)(!1),Q=(0,r.iH)(!1),ee=(0,r.iH)([]);const te=(0,r.iH)(null);(0,n.bv)((()=>{let t=te.value.getBoundingClientRect();function d(){let t=ee.value[0];t&&0===e.eicEntities[t].content.data.text.trim().length&&(ee.value.shift(),i.deleteEntities([t]),new T.D(l.rawState.currentViewData.boardId,[t]).send()),Q.value=!1,J.value=!1,setTimeout((()=>i.selectEntities(ee.value,!0)),100)}X=t.top,(0,n.JJ)("canvasYOffset",X),W.setOffset(0,X),V.setOffset(0,X),B.setOffset(0,X),I.setOffset(0,X),O.setOffset(0,X),_.panBy(-t.width/2,-t.height/2),F.register("entityDeletion","keydown",(e=>{if(s.value&&!o.activeViewConfig().value){let t=i.selectedEntityIds().value;if(t.length>0&&("Delete"===e.code||"Backspace"===e.code))return e.preventDefault(),i.deleteSelectedEntities(),void new T.D(l.rawState.currentViewData.boardId,t).send()}})),F.register("modifierPressed","keydown",(e=>{"Control"!==e.key&&"Meta"!==e.key||(J.value=!0)})),F.register("modifierReleased","keyup",(e=>{"Control"!==e.key&&"Meta"!==e.key||(J.value=!1)})),M.register("canvasGoToBlock","goToBlock",(t=>{let i=e.eicEntities[t];if(i){let e=te.value.getBoundingClientRect(),t=U.value[i.id],n={x:e.width/2-t*i.location.x-t*i.location.width/2,y:e.height/2-t*i.location.y-t*i.location.height/2};W.zoomTo(t,700,j.sharedTweenGroup),_.panTo(n.x,n.y,700,j.sharedTweenGroup),requestAnimationFrame(j.updateGroup)}})),M.register("canvasBlockCreated","blockCreated",(e=>{Q.value&&ee.value.unshift(e)})),M.register("canvasBlockEditComplete","blockEditComplete",(t=>{if(Q.value)if(t)d();else{let t=ee.value[0];if(t){let i=e.eicEntities[t];if(0===i.content.data.text.trim().length)d();else{const e=i.location.height+10/U.value[i.id];new D.w(l.rawState.currentViewData.boardId,{x:i.location.x,y:i.location.y+e,width:i.location.width,height:i.location.height},a.getParent(i.id)).send()}}}}))})),(0,n.Ah)((()=>{F.deregisterAll(),M.deregister("canvasGoToBlock")}));let ie,ne=(0,r.iH)(0);return(0,n.YP)([W.scale,_.deltaDrag.value],(()=>{ie&&window.clearTimeout(ie),ie=setTimeout((()=>{ne.value=0===ne.value?1:0}),100)})),{spazboxOpacity:ne,ghostBlock:Y,snapZones:A,blockUnderMouse:P,DEFAULT_ENTITY_WIDTH:b.mz,DEFAULT_ENTITY_HEIGHT:b.j$,entityCanvas:te,entityScales:U,ctrlHeld:J,zoomScale:(0,n.Fl)((()=>I.isDragging.value||O.isDragging.value?W.scale.value:1)),nonExpandedEntityIds:(0,n.Fl)((()=>Object.keys(e.eicEntities).filter((e=>!d.value.includes(e))))),expandedEntityIds:(0,n.Fl)((()=>Object.keys(e.eicEntities).filter((e=>d.value.includes(e))))),linkStart:Z,linkDestination:R,blockDragDestination:H,beginEntityTrayLinking:function(e,t){B.mouseDown(e,t),Z.x=B.metadata.data.sourceBoundingBox.x+B.metadata.data.sourceBoundingBox.width/2,Z.y=B.metadata.data.sourceBoundingBox.y+B.metadata.data.sourceBoundingBox.height/2;let i=B.metadata.data.sourceEntityId,n=U.value[i];Y.scale=n+.5*n,Y.block.location.width=b.mz/(n+.5*n),Y.block.location.height=b.j$/(n+.5*n),Y.block.location.x=R.value.x-Y.block.location.width/2,Y.block.location.y=R.value.y-Y.block.location.height/2,A.value=L(a.getImmediateChildren(i),Y.block.location,Y.scale)},createNewEntity:e=>{if(s.value){let t=K(e.clientX,e.clientY);new D.w(l.rawState.currentViewData.boardId,{x:t.x-b.mz/2,y:t.y-b.j$/2,width:b.mz,height:b.j$}).send()}},startBlockDrag:(t,n)=>{I.mouseDown(t,n),H.deltaX=I.deltaDrag.value.deltaX,H.deltaY=I.deltaDrag.value.deltaY;const l=e.eicEntities[n.blockId];let o=a.getSiblings(n.blockId);if(l.isSelected){let e=i.selectedEntityIds().value;(0,z.p6)(o,e)}let s=o.indexOf(n.blockId);-1!==s&&o.splice(s,1),A.value=L(o,l.location,U.value[n.blockId])},mouseDown:e=>{0===e.button?(l.setDisablePointerEvents(!0),V.mouseDown(e)):2===e.button&&(l.setDisablePointerEvents(!0),q=!0)},mouseMove:e=>{N.recordEvent(e)},completeDraggableActions:e=>{if(l.setDisablePointerEvents(!1),A.value=[],V.isDragging.value&&(i.selectEntitiesByBoundingBox(new b.kB((V.boundingBox.value.x-_.deltaDrag.value.x)/W.scale.value,(V.boundingBox.value.y-_.deltaDrag.value.y)/W.scale.value,V.boundingBox.value.width/W.scale.value,V.boundingBox.value.height/W.scale.value),!e.shiftKey),V.mouseUp()),q&&(q=!1),I.isDragging.value){if(0!==H.deltaX||0!==H.deltaY){let e=G(H.deltaX,H.deltaY);i.dragSelectedEntities(e.dx,e.dy);let t=new E.E(l.rawState.currentViewData.boardId),n=i.selectedEntityIds().value;for(let e of n){let n=i.rawState.entities[e];t.addEntityAndPosition(e,n.location.x,n.location.y,n.location.width,n.location.height)}t.send()}I.mouseUp(),H.deltaX=0,H.deltaY=0}if(O.isDragging.value){let e=G(O.deltaDrag.value.deltaWidth,O.deltaDrag.value.deltaHeight),t=G(O.deltaDrag.value.deltaX,O.deltaDrag.value.deltaY);i.resizeSelectedEntities(e.dx,e.dy),i.dragSelectedEntities(t.dx,t.dy);let n=new E.E(l.rawState.currentViewData.boardId),a=i.selectedEntityIds().value;for(let e of a){let t=i.rawState.entities[e],a=k.F(t.location.x,t.location.y,t.location.width,t.location.height);a.width=Math.max(a.width,b.xZ/U.value[e]),a.height=Math.max(a.height,b.DG/U.value[e]),n.addEntityAndPosition(e,a.x,a.y,a.width,a.height)}n.send(),O.mouseUp()}if(B.isDragging.value){let t=K(e.clientX,e.clientY),n=i.entityAtCoordinates(t),o=B.metadata.data.sourceEntityId,s=n?n.id:void 0;s===o||("setCreateChild"===B.metadata.data.type?s?(a.setParent(s,o),new S.e(l.rawState.currentViewData.boardId,s,o).send()):((e.ctrlKey||e.metaKey)&&(ee.value=[],Q.value=!0),new D.w(l.rawState.currentViewData.boardId,Y.block.location,o).send()):B.metadata.data.type),B.mouseUp()}},mouseEnterBlock:e=>{P.value=e},mouseLeaveBlock:e=>{P.value=void 0},pannable:(0,r.qj)(_),zoomable:(0,r.qj)(W),selectionDraggable:(0,r.qj)(V),entityDraggable:(0,r.qj)(I),entityTrayLinking:(0,r.qj)(B),entityResizable:(0,r.qj)(O),tweenGroup:(0,r.qj)(j)}}});var B=i(93379),I=i.n(B),O=i(7795),M=i.n(O),F=i(90569),j=i.n(F),_=i(3565),N=i.n(_),q=i(19216),Z=i.n(q),R=i(44589),H=i.n(R),P=i(17696),Y={};Y.styleTagTransform=H(),Y.setAttributes=N(),Y.insert=j().bind(null,"head"),Y.domAPI=M(),Y.insertStyleElement=Z(),I()(P.Z,Y),P.Z&&P.Z.locals&&P.Z.locals;const A=(0,i(83744).Z)(V,[["render",function(e,t,i,r,c,u){const p=(0,n.up)("eic-link"),w=(0,n.up)("eic-entity");return(0,n.wg)(),(0,n.iD)("svg",{"data-test":"entity-canvas",ref:"entityCanvas",class:(0,a.C_)(["mw-app-relationship-canvas",{"creating-bulk":e.entityTrayLinking.isDragging&&e.ctrlHeld}]),onWheel:t[6]||(t[6]=(0,l.iM)((t=>(e.tweenGroup.stopGroup(),e.pannable.wheel(t),e.zoomable.wheel(t))),["prevent"])),onMousedown:t[7]||(t[7]=(0,l.iM)((t=>e.mouseDown(t)),["self"])),onMousemove:t[8]||(t[8]=t=>e.mouseMove(t)),onMouseup:t[9]||(t[9]=t=>e.completeDraggableActions(t)),onDblclick:t[10]||(t[10]=(...t)=>e.createNewEntity&&e.createNewEntity(...t)),onContextmenu:t[11]||(t[11]=e=>e.preventDefault())},[(0,n.kq)(" Prevents right-click menu showing up on the canvas when user tries right-click dragging. "),(0,n._)("rect",{x:"0",y:"0",width:"0",height:"0",fill:"none",style:(0,a.j5)({opacity:e.spazboxOpacity})},null,4),(0,n.kq)(" Everything that gets scaled goes in here "),(0,n._)("g",{"data-test":"canvas-contents",class:"eic-canvas-group",style:(0,a.j5)({transform:`${e.pannable.translateString} ${e.zoomable.scaleString}`})},[(0,n.kq)(' All of our "snap zones" get painted first. '),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.snapZones,(e=>((0,n.wg)(),(0,n.iD)("circle",{class:"mwe-snap-zone",key:e.key,cx:e.x,cy:e.y,r:20/e.scale},null,8,o)))),128)),(0,n.kq)(" When linking entities using the entity tray, this draws the line the user's dragging. "),e.entityTrayLinking.isDragging?((0,n.wg)(),(0,n.j4)(p,{key:0,"data-test":"entity-canvas-active-link","eic-skip-tween":!0,"eic-scale":e.zoomScale,"my-depth-scale":e.entityScales[e.entityTrayLinking.metadata.data.sourceEntityId],source:e.linkStart,destination:e.linkDestination,"temp-shift":e.blockDragDestination,"temp-resize":e.entityResizable.deltaDrag},null,8,["eic-scale","my-depth-scale","source","destination","temp-shift","temp-resize"])):(0,n.kq)("v-if",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.eicLinks,(t=>((0,n.wg)(),(0,n.j4)(p,{key:t.id,"eic-skip-tween":e.entityDraggable.isDragging||e.entityResizable.isDragging,"eic-scale":e.zoomScale,"my-depth-scale":e.entityScales[t.source.entityId],source:t.source,destination:t.destination,"temp-shift":e.blockDragDestination,"temp-resize":e.entityResizable.deltaDrag},null,8,["eic-skip-tween","eic-scale","my-depth-scale","source","destination","temp-shift","temp-resize"])))),128)),(0,n.kq)(' Render a "ghost block" when the user is creating a child block. '),e.entityTrayLinking.isDragging&&"setCreateChild"===e.entityTrayLinking.metadata.data.type&&void 0===e.blockUnderMouse?((0,n.wg)(),(0,n.j4)(w,{id:e.ghostBlock.block.id,key:e.ghostBlock.block.id,"eic-entity":e.ghostBlock.block,"eic-scale":e.zoomScale,"my-scale":e.ghostBlock.scale,"eic-skip-tween":!0},null,8,["id","eic-entity","eic-scale","my-scale"])):(0,n.kq)("v-if",!0),(0,n.kq)(" Render visible entities that _aren't_ expanded. Rendering these first so they're \"below\" the expanded entities. "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.nonExpandedEntityIds,(i=>((0,n.wg)(),(0,n.j4)(w,{id:i,key:i,"eic-entity":e.eicEntities[i],"eic-scale":e.zoomScale,"eic-temp-shift":e.blockDragDestination,"eic-temp-resize":e.entityResizable.deltaDrag,"eic-skip-tween":e.entityDraggable.isDragging||e.entityResizable.isDragging,"my-scale":e.entityScales[i],onDrag:t[0]||(t[0]=t=>e.startBlockDrag(t.mouseEvent,{blockId:t.blockId})),onResize:t[1]||(t[1]=t=>e.entityResizable.mouseDown(t.mouseEvent,t.direction)),onEntityTrayDragStart:t[2]||(t[2]=t=>e.beginEntityTrayLinking(t.mouseEvent,t.metadata)),onMouseEnterBlock:e.mouseEnterBlock,onMouseLeaveBlock:e.mouseLeaveBlock},null,8,["id","eic-entity","eic-scale","eic-temp-shift","eic-temp-resize","eic-skip-tween","my-scale","onMouseEnterBlock","onMouseLeaveBlock"])))),128)),(0,n.kq)(" Render any entities that are expanded. This makes them appear on top of other entities. "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.expandedEntityIds,(i=>((0,n.wg)(),(0,n.j4)(w,{id:i,key:i,"initial-hover-state":!0,"eic-entity":e.eicEntities[i],"eic-scale":e.zoomable.scale,"eic-temp-shift":e.blockDragDestination,"eic-temp-resize":e.entityResizable.deltaDrag,"eic-skip-tween":e.entityDraggable.isDragging||e.entityResizable.isDragging,"my-scale":e.entityScales[i],onDrag:t[3]||(t[3]=t=>e.startBlockDrag(t.mouseEvent,{blockId:t.blockId})),onResize:t[4]||(t[4]=t=>e.entityResizable.mouseDown(t.mouseEvent,t.direction)),onEntityTrayDragStart:t[5]||(t[5]=t=>e.beginEntityTrayLinking(t.mouseEvent,t.metadata)),onMouseEnterBlock:e.mouseEnterBlock,onMouseLeaveBlock:e.mouseLeaveBlock},null,8,["id","eic-entity","eic-scale","eic-temp-shift","eic-temp-resize","eic-skip-tween","my-scale","onMouseEnterBlock","onMouseLeaveBlock"])))),128)),0===Object.keys(e.eicEntities).length?((0,n.wg)(),(0,n.iD)("text",s,"Double-click anywhere to get started")):(0,n.kq)("v-if",!0)],4),(0,n.kq)(" The user's selection box when doing a drag-to-select "),e.selectionDraggable.isDragging?((0,n.wg)(),(0,n.iD)("rect",{key:0,class:"selection-box",x:e.selectionDraggable.boundingBox.x,y:e.selectionDraggable.boundingBox.y,width:e.selectionDraggable.boundingBox.width,height:e.selectionDraggable.boundingBox.height},null,8,d)):(0,n.kq)("v-if",!0)],34)}]])},10449:(e,t,i)=>{i.r(t),i.d(t,{default:()=>j});var n=i(66252),a=i(3577),l=i(49963);const o=["rx","width","height"],s=[(0,n._)("rect",null,null,-1),(0,n._)("text",null,"Locked Open",-1)],d=["width","height"],r={key:0};var c=i(2262),u=i(50432),p=i(68952),w=i(80954),y=i(74169),m=i(96834),g=i(61746),v=i(95610),f=i(97242),h=i(19266);const x=(0,n.aZ)({emits:["drag","resize","entityTrayDragStart","mouseEnterBlock","mouseLeaveBlock"],props:{eicEntity:Object,eicScale:Number,eicTempShift:Object,eicTempResize:Object,eicSkipTween:Boolean,initialHoverState:{type:Boolean,default:!1},myScale:{type:Number,default:1}},setup(e,t){let i=(0,u.V)(),a=(0,p.F)(),l=(0,w.$)(),o=(0,y.q)(),{canEditBoardContents:s}=(0,h.T)(),d=(0,n.Fl)((()=>i.entityIdBeingEdited().value===e.eicEntity.id)),r=(0,c.iH)(e.initialHoverState),x=(0,n.Fl)((()=>{if("text"===e.eicEntity.content.type)return"eic-text-content"})),b=(0,n.Fl)((()=>{let t={x:e.eicEntity.location.x,y:e.eicEntity.location.y,width:e.eicEntity.location.width,height:e.eicEntity.location.height},i=e.eicScale?e.eicScale:1;e.eicEntity.isSelected&&(e.eicTempShift&&(t.x+=e.eicTempShift.deltaX/i,t.y+=e.eicTempShift.deltaY/i),e.eicTempResize&&(t.x+=e.eicTempResize.deltaX/i,t.y+=e.eicTempResize.deltaY/i,t.width+=e.eicTempResize.deltaWidth/i,t.height+=e.eicTempResize.deltaHeight/i));let n=g.F(t.x,t.y,t.width,t.height),a=e.myScale;return n.width=Math.max(n.width,v.xZ/a),n.height=Math.max(n.height,v.DG/a),n})),k=(0,c.iH)(e.initialHoverState),E=(0,n.Fl)((()=>e.eicEntity.isLockedOpen)),D=(0,c.qj)((0,c.iH)(void 0)),S=(0,c.iH)({width:b.value.width,height:b.value.height}),T=(0,n.Fl)((()=>k.value||E.value?e.eicScale:e.myScale));function C(){k.value||E.value?setTimeout((()=>{D.value&&(S.value.width=600/T.value,S.value.height=D.value.getBoundingClientRect().height/T.value)}),0):(S.value.width=b.value.width,S.value.height=b.value.height)}(0,n.bv)((()=>{let e=(0,n.Fl)((()=>D.value.getBoundingClientRect().height||0));(0,n.YP)([e,k,E,b],(()=>{C()})),k.value&&(C(),setTimeout((()=>C()),250),setTimeout((()=>C()),500))})),(0,n.YP)([k,E],((t,n)=>{n[1]&&!t[1]&&(k.value=!1),k.value||E.value?(i.expandEntity(e.eicEntity.id),setTimeout((()=>C()),250),setTimeout((()=>C()),500)):(document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),setTimeout((()=>{i.contractEntity(e.eicEntity.id)}),500))}));let z=(0,n.f3)("canvasPan"),V=(0,n.f3)("canvasZoom"),B=(0,n.f3)("canvasYOffset"),I=(0,c.iH)({x:void 0,y:void 0}),O=(0,n.Fl)((()=>{let t=i.getStyles(e.eicEntity,T.value);return k.value||E.value?Object.assign(Object.assign({},t),{stroke:"none",fill:"auto"}):t})),M=(0,n.Fl)((()=>{let t=i.getStyles(e.eicEntity,T.value),n={};return t.fill&&(n.background=t.fill),t.stroke&&(n.border="3px solid "+t.stroke),t.color&&(n.color=t.color),n}));return{ResizeDirection:m._,inEditMode:d,isEntityHovered:r,entityBody:D,canEditBoardContents:s,showPreview:k,isExpanded:E,updateBodySize:C,contentComponentType:x,entityStyle:O,expandedSummaryStyle:M,boundingBox:b,bodySize:S,adjustedScale:T,selectIfNotSelected:t=>{if(0===t.button&&!e.eicEntity.isSelected)if(t.ctrlKey||t.metaKey){let n=l.getTransitiveDescendants(e.eicEntity.id);i.selectEntities(n,!t.shiftKey)}else i.selectEntity(e.eicEntity.id,!t.shiftKey)},toggleExpansion:()=>{i.toggleBlockExpansion([e.eicEntity.id])},tryToStartDrag:i=>{s.value&&0===i.button&&!d.value&&(a.setDisablePointerEvents(!0),t.emit("drag",{mouseEvent:i,blockId:e.eicEntity.id}))},tryToResize:e=>{s.value&&(a.setDisablePointerEvents(!0),t.emit("resize",e))},enterEditMode:t=>{s.value&&i.startEditingEntity(e.eicEntity.id)},exitEditMode:({cancelled:t,editEvent:n})=>{JSON.stringify(e.eicEntity.content)!==JSON.stringify(n)&&(i.setEntityContent(e.eicEntity.id,n),new f.I(a.rawState.currentViewData.boardId,e.eicEntity.id,n).send()),i.stopEditingEntity(),o.emit("blockEditComplete",t)},mouseEnter:i=>{r.value=!0,t.emit("mouseEnterBlock",e.eicEntity.id)},mouseMove:e=>{I.value={x:e.clientX,y:e.clientY}},mouseLeave:i=>{if(t.emit("mouseLeaveBlock",e.eicEntity.id),!k.value)return r.value=!1,void(k.value=!1);if(!I.value.x||!I.value.y)return;let n=b.value.x,a=b.value.x+S.value.width,l=b.value.y,o=b.value.y+S.value.height;const s=(I.value.x-z.value.x)/V.value,d=(I.value.y-z.value.y-B)/V.value,c=(i.clientX-z.value.x)/V.value,u=(i.clientY-z.value.y-B)/V.value,p=160;(n-20<=s&&s<=n+p&&c<n||a-p<=s&&s<=a+20&&c>a||l-20<=d&&d<=l+p&&u<l||o-p<=d&&d<=o+20&&u>o)&&(r.value=!1,k.value=!1)}}}});var b=i(93379),k=i.n(b),E=i(7795),D=i.n(E),S=i(90569),T=i.n(S),C=i(3565),z=i.n(C),V=i(19216),B=i.n(V),I=i(44589),O=i.n(I),M=i(72289),F={};F.styleTagTransform=O(),F.setAttributes=z(),F.insert=T().bind(null,"head"),F.domAPI=D(),F.insertStyleElement=B(),k()(M.Z,F),M.Z&&M.Z.locals&&M.Z.locals;const j=(0,i(83744).Z)(x,[["render",function(e,t,i,c,u,p){const w=(0,n.up)("eic-expanded-entity"),y=(0,n.up)("eic-entity-tray");return(0,n.wg)(),(0,n.iD)("g",{class:(0,a.C_)({"mw-app-relationship-entity":!0,"eic-skip-tween":e.eicSkipTween}),style:(0,a.j5)({transform:`translate(${e.boundingBox.x}px, ${e.boundingBox.y}px)`}),onMouseenter:t[18]||(t[18]=(...t)=>e.mouseEnter&&e.mouseEnter(...t)),onMouseleave:t[19]||(t[19]=(...t)=>e.mouseLeave&&e.mouseLeave(...t)),onMousemove:t[20]||(t[20]=(...t)=>e.mouseMove&&e.mouseMove(...t)),onWheel:t[21]||(t[21]=t=>e.updateBodySize())},[(0,n.kq)(" You know what would be great? If spinning the mouse wheel while the block was expanding didn't make it forget how to size itself, but noOOOooo. "),(0,n.kq)(" The background/border "),(0,n._)("rect",{"data-test":"entity",class:(0,a.C_)(["eic-entity-rect",{selected:e.eicEntity.isSelected}]),rx:e.showPreview||e.isExpanded?8/e.adjustedScale:20/e.adjustedScale,style:(0,a.j5)(e.entityStyle),width:e.bodySize.width,height:e.bodySize.height},null,14,o),(0,n.kq)(' The "Locked Open" message '),(0,n._)("g",{style:(0,a.j5)({transform:`scale(${1/e.adjustedScale})`})},[(0,n._)("g",{class:(0,a.C_)(["eic-entity-displaying-preview",{"is-visible":e.isExpanded}])},s,2)],4),(0,n.kq)(" The entity content / body "),((0,n.wg)(),(0,n.iD)("foreignObject",{style:(0,a.j5)({transform:`scale(${1/e.adjustedScale})`}),width:e.bodySize.width*e.adjustedScale,height:e.bodySize.height*e.adjustedScale,onMousedown:t[14]||(t[14]=(...t)=>e.selectIfNotSelected&&e.selectIfNotSelected(...t))},[(0,n._)("body",{xmlns:"http://www.w3.org/1999/xhtml",ref:"entityBody",class:(0,a.C_)({expanded:e.showPreview||e.isExpanded}),onDblclick:t[13]||(t[13]=(0,l.iM)(((...t)=>e.enterEditMode&&e.enterEditMode(...t)),["stop"]))},[(0,n.kq)(" Fully expanded, showing all fields/comments/etc "),e.isExpanded?((0,n.wg)(),(0,n.iD)("div",r,[((0,n.wg)(),(0,n.j4)((0,n.LL)(e.contentComponentType),{class:(0,a.C_)(["eic-entity-content mw-block-content-section",{"in-edit-mode":e.inEditMode}]),"data-test":"dynamic-entity-content","entity-data":e.eicEntity.content.data,"entity-style":e.expandedSummaryStyle,style:(0,a.j5)(e.expandedSummaryStyle),"in-edit-mode":e.inEditMode,onEditcomplete:e.exitEditMode,onMousedown:e.tryToStartDrag},null,8,["class","entity-data","entity-style","style","in-edit-mode","onEditcomplete","onMousedown"])),(0,n.Wm)(w,{eicEntity:e.eicEntity,isPreview:!1,onDblclick:t[0]||(t[0]=(0,l.iM)((()=>{}),["stop"])),onMwUpdateSize:t[1]||(t[1]=t=>e.updateBodySize())},null,8,["eicEntity"])])):e.showPreview?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.kq)(' Expand to show "preview" fields '),(0,n._)("div",null,[((0,n.wg)(),(0,n.j4)((0,n.LL)(e.contentComponentType),{class:(0,a.C_)(["eic-entity-content mw-block-content-section",{"in-edit-mode":e.inEditMode}]),"data-test":"dynamic-entity-content","entity-data":e.eicEntity.content.data,style:(0,a.j5)(e.expandedSummaryStyle),"entity-style":e.expandedSummaryStyle,"in-edit-mode":e.inEditMode,onEditcomplete:e.exitEditMode,onMousedown:e.tryToStartDrag},null,8,["class","entity-data","style","entity-style","in-edit-mode","onEditcomplete","onMousedown"])),(0,n.Wm)(w,{eicEntity:e.eicEntity,isPreview:!0,onDblclick:t[2]||(t[2]=(0,l.iM)((()=>{}),["stop"])),onMwUpdateSize:t[3]||(t[3]=t=>e.updateBodySize())},null,8,["eicEntity"])])],2112)):((0,n.wg)(),(0,n.iD)(n.HY,{key:2},[(0,n.kq)(" Standard, resizable view "),(0,n._)("div",{class:(0,a.C_)(["resize-grid",{resizable:e.canEditBoardContents}])},[(0,n._)("div",{class:"resize-handle resize-nw",onMousedown:t[4]||(t[4]=t=>e.tryToResize({mouseEvent:t,direction:e.ResizeDirection.NW}))},null,32),(0,n._)("div",{class:"resize-handle resize-n",onMousedown:t[5]||(t[5]=t=>e.tryToResize({mouseEvent:t,direction:e.ResizeDirection.N}))},null,32),(0,n._)("div",{class:"resize-handle resize-ne",onMousedown:t[6]||(t[6]=t=>e.tryToResize({mouseEvent:t,direction:e.ResizeDirection.NE}))},null,32),(0,n._)("div",{class:"resize-handle resize-w",onMousedown:t[7]||(t[7]=t=>e.tryToResize({mouseEvent:t,direction:e.ResizeDirection.W}))},null,32),(0,n._)("div",{class:"resize-content","data-test":"entity-content",onMousedown:t[8]||(t[8]=(...t)=>e.tryToStartDrag&&e.tryToStartDrag(...t))},[((0,n.wg)(),(0,n.j4)((0,n.LL)(e.contentComponentType),{class:"eic-entity-content","data-test":"dynamic-entity-content","entity-data":e.eicEntity.content.data,"entity-style":e.entityStyle,"in-edit-mode":e.inEditMode,onEditcomplete:e.exitEditMode},null,8,["entity-data","entity-style","in-edit-mode","onEditcomplete"]))],32),(0,n._)("div",{class:"resize-handle resize-e",onMousedown:t[9]||(t[9]=t=>e.tryToResize({mouseEvent:t,direction:e.ResizeDirection.E}))},null,32),(0,n._)("div",{class:"resize-handle resize-sw",onMousedown:t[10]||(t[10]=t=>e.tryToResize({mouseEvent:t,direction:e.ResizeDirection.SW}))},null,32),(0,n._)("div",{class:"resize-handle resize-s",onMousedown:t[11]||(t[11]=t=>e.tryToResize({mouseEvent:t,direction:e.ResizeDirection.S}))},null,32),(0,n._)("div",{class:"resize-handle resize-se",onMousedown:t[12]||(t[12]=t=>e.tryToResize({mouseEvent:t,direction:e.ResizeDirection.SE})),"data-test":"entity-resize-se"},null,32)],2)],2112))],34)],44,d)),(0,n.kq)(" The entity tray "),(0,n.wy)((0,n.Wm)(y,{style:(0,a.j5)({transform:`scale(${1/e.adjustedScale}) translate(2px, 2px)`}),entityId:e.eicEntity.id,entityBoundingBox:e.boundingBox,isVisible:e.isEntityHovered,isExpanded:e.isExpanded,onEntityTrayDragStart:t[15]||(t[15]=t=>e.$emit("entityTrayDragStart",t)),onShowPreview:t[16]||(t[16]=t=>e.showPreview=!0),onToggleExpansion:e.toggleExpansion,onDblclick:t[17]||(t[17]=(0,l.iM)((()=>{}),["stop"]))},null,8,["style","entityId","entityBoundingBox","isVisible","isExpanded","onToggleExpansion"]),[[l.F8,!e.inEditMode]])],38)}]])},71293:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var n=i(66252),a=i(3577);const l=["width"],o={class:"mw-magnifying-wrapper"},s=(0,n._)("title",null,"Hover to expand this block. Click to lock open.",-1),d={key:0,class:"mw-hierarchy-wrapper"},r=(0,n._)("title",null,"Drag this to create a child block.",-1);var c=i(2262),u=i(19266);const p=(0,n.aZ)({emits:["entityTrayDragStart","showPreview","toggleExpansion"],props:{isVisible:Boolean,entityId:String,entityBoundingBox:Object,isExpanded:Boolean},setup(e,t){let{canEditBoardContents:i}=(0,u.T)(),a=(0,c.iH)(void 0);return{canEditBoardContents:i,startPreviewTimer:()=>{void 0===a.value&&(a.value=setTimeout((()=>t.emit("showPreview")),250))},cancelPreviewTimer:()=>{void 0!==a.value&&(clearTimeout(a.value),a.value=void 0)},numberOfIcons:(0,n.Fl)((()=>i.value?2:1))}}});var w=i(93379),y=i.n(w),m=i(7795),g=i.n(m),v=i(90569),f=i.n(v),h=i(3565),x=i.n(h),b=i(19216),k=i.n(b),E=i(44589),D=i.n(E),S=i(8275),T={};T.styleTagTransform=D(),T.setAttributes=x(),T.insert=f().bind(null,"head"),T.domAPI=g(),T.insertStyleElement=k(),y()(S.Z,T),S.Z&&S.Z.locals&&S.Z.locals;const C=(0,i(83744).Z)(p,[["render",function(e,t,i,c,u,p){const w=(0,n.up)("eic-svg-magnifying-glass"),y=(0,n.up)("eic-svg-hierarchy-symbol");return(0,n.wg)(),(0,n.iD)("g",{style:(0,a.j5)({opacity:e.isVisible?1:0,transition:"opacity 0.2s"}),"data-test":"entity-tray",class:"mw-app-relationship-entitytray"},[(0,n.kq)(" Each icon should be 20px by 20px with 10px between them. "),(0,n._)("rect",{class:"entity-tray-background",rx:"5",x:"5",y:"5",width:30*e.numberOfIcons,height:"30"},null,8,l),(0,n.kq)(" Create/Link Block "),(0,n.kq)(" TODO-later : Enable entity linking "),(0,n.kq)(" v-on:mousedown=\"$emit('entityTrayDragStart', { mouseEvent: $event, metadata: {type: 'setCreateLink', sourceEntityId: entityId, sourceBoudingBox: entityBoundingBox} })\" "),(0,n.kq)(' <eic-svg-chainlink class="mw-icon" data-test="entity-tray-set-create-link" style="cursor: not-allowed;"></eic-svg-chainlink> '),(0,n.kq)(" Show Preview / Expand Block "),(0,n._)("g",o,[(0,n.Wm)(w,{width:"20",height:"20",class:(0,a.C_)(["mw-icon",{"show-active":e.isExpanded}]),onMouseover:t[0]||(t[0]=t=>e.startPreviewTimer()),onMouseleave:t[1]||(t[1]=t=>e.cancelPreviewTimer()),onClick:t[2]||(t[2]=t=>e.$emit("toggleExpansion"))},null,8,["class"]),s]),(0,n.kq)(" Create/Set Child "),e.canEditBoardContents?((0,n.wg)(),(0,n.iD)("g",d,[(0,n.Wm)(y,{width:"20",height:"20",class:"mw-icon","data-test":"entity-tray-set-create-child",onMousedown:t[3]||(t[3]=t=>e.$emit("entityTrayDragStart",{mouseEvent:t,metadata:{type:"setCreateChild",sourceEntityId:e.entityId,sourceBoundingBox:e.entityBoundingBox}}))}),r])):(0,n.kq)("v-if",!0)],4)}]])},12514:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Y});var n=i(66252),a=i(3577);const l={class:"mw-app-relationship-expandedentity"},o={class:"mw-block-content-section add-classifications-fields"},s=(0,n._)("span",null,"Classifications:",-1),d={key:1,class:"title-col"},r=[(0,n._)("span",null,"Classifications:",-1)],c={class:"content-col"},u=(0,n._)("span",null,"Extra Fields:",-1),p={key:3,class:"title-col"},w=[(0,n._)("span",null,"Extra Fields:",-1)],y={class:"content-col"},m={key:0,class:"field-display"},g={key:1,class:"no-field-display"},v={key:0},f={class:"field-name-col"},h={key:0,class:"mw-block-content-section"},x={key:0},b={class:"field-name-col"},k={key:1,class:"mw-block-content-section mw-no-facs-to-display"};var E=i(80914),D=i(50432),S=i(19266),T=i(65687),C=i(22686);const z=(0,n.aZ)({props:{eicEntity:Object,isPreview:Boolean},setup(e,t){let i=(0,E.I)(),a=(0,D.V)(),l=(0,T.X)(),o=(0,C.A)(),{canEditBoardContents:s,canEditBoardClassifications:d}=(0,S.T)(),r=i.classificationIds(),c=i.classifications(),u=i.fields(),p=i.possibleValues(),w=(0,n.Fl)((()=>a.activeFieldValueCounts([e.eicEntity.id]).value)),y=(0,n.Fl)((()=>r.value.filter((t=>e.eicEntity.classificationIds.includes(t))))),m=(0,n.Fl)((()=>e.eicEntity.fieldIds)),g=(0,n.Fl)((()=>r.value.reduce(((t,i)=>(t[i]=e.eicEntity.classificationIds.includes(i),t)),{})));return{classificationDefs:c,fieldDefs:u,pvDefs:p,activeFieldValueCounts:w,classificationIds:r,displayedClassificationIds:y,displayedFieldIds:m,entityCopy:(0,n.Fl)((()=>JSON.parse(JSON.stringify(e.eicEntity)))),classificationSelections:g,editFields:()=>{l.openEditFieldsDialog([e.eicEntity.id],e.eicEntity.fieldIds,u.value,p.value)},editClassifications:()=>{o.openEditClassificationsDialog(r.value,c.value,u.value,p.value)},setFieldValue:(t,i)=>{l.setFieldValueOnEntities([e.eicEntity],t,i)},setClassification:(t,i)=>{s.value&&o.setClassificationOnEntities([e.eicEntity.id],t,i)},canEditBoardContents:s,canEditBoardClassifications:d,getDisplayedFieldIds:e=>c.value[e].fieldIds,fieldNames:(0,n.Fl)((()=>e.eicEntity.fieldIds.map((e=>u.value[e].name)).join(", ")))}}});var V=i(93379),B=i.n(V),I=i(7795),O=i.n(I),M=i(90569),F=i.n(M),j=i(3565),_=i.n(j),N=i(19216),q=i.n(N),Z=i(44589),R=i.n(Z),H=i(68854),P={};P.styleTagTransform=R(),P.setAttributes=_(),P.insert=F().bind(null,"head"),P.domAPI=O(),P.insertStyleElement=q(),B()(H.Z,P),H.Z&&H.Z.locals&&H.Z.locals;const Y=(0,i(83744).Z)(z,[["render",function(e,t,i,E,D,S){const T=(0,n.up)("eic-svg-pencil"),C=(0,n.up)("eic-checkbox"),z=(0,n.up)("eic-dynamic-field"),V=(0,n.up)("eic-markdowneditor");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n.kq)(" Add Classifications / Extra Fields "),(0,n._)("div",o,[e.canEditBoardClassifications?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"title-col clickable",title:"Edit the classifications defined for this board.",onClick:t[0]||(t[0]=t=>e.editClassifications())},[(0,n.Wm)(T,{width:"18",height:"18"}),s])):((0,n.wg)(),(0,n.iD)("div",d,r)),(0,n._)("div",c,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.classificationIds,(t=>((0,n.wg)(),(0,n.j4)(C,{key:t,mwDisabled:!e.canEditBoardContents,"eic-label":e.classificationDefs[t].name,modelValue:e.classificationSelections[t],"onUpdate:modelValue":i=>e.classificationSelections[t]=i,onClick:i=>e.setClassification(t,!e.classificationSelections[t])},null,8,["mwDisabled","eic-label","modelValue","onUpdate:modelValue","onClick"])))),128))]),e.canEditBoardClassifications?((0,n.wg)(),(0,n.iD)("div",{key:2,class:"title-col clickable",title:"Edit the extra fields defined on this block.",onClick:t[1]||(t[1]=t=>e.editFields())},[(0,n.Wm)(T,{width:"18",height:"18"}),u])):((0,n.wg)(),(0,n.iD)("div",p,w)),(0,n._)("div",y,[""!==e.fieldNames?((0,n.wg)(),(0,n.iD)("span",m,(0,a.zw)(e.fieldNames),1)):((0,n.wg)(),(0,n.iD)("span",g,"(none)"))])]),(0,n.kq)(" Classifications "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.displayedClassificationIds,(i=>((0,n.wg)(),(0,n.iD)("div",{class:"mw-block-content-section mw-classification-flex",key:"entity-expanded-"+i},[(0,n._)("div",null,(0,a.zw)(e.classificationDefs[i].name),1),(0,n._)("div",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.getDisplayedFieldIds(i),(i=>((0,n.wg)(),(0,n.iD)("div",{class:"field-row",key:"entity-expanded-"+i},[(0,n.kq)(" Non-textareas split the width between the field name and value "),"Text Editor"!==e.fieldDefs[i].type?((0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("div",f,(0,a.zw)(e.fieldDefs[i].name),1),(0,n.Wm)(z,{class:"field-component-col",mwDisabled:!e.canEditBoardContents,eicFieldDef:e.fieldDefs[i],possibleValueCounts:e.activeFieldValueCounts[i],keyPrefix:"expandedentity-",onEicValSet:t=>e.setFieldValue(i,t)},null,8,["mwDisabled","eicFieldDef","possibleValueCounts","onEicValSet"])])):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.kq)(" Textareas take up the full width for maximum awesomeness displaying. "),(0,n._)("div",null,[(0,n.Wm)(V,{mwDisabled:!e.canEditBoardContents,modelValue:e.entityCopy.fieldValues[i],"onUpdate:modelValue":t=>e.entityCopy.fieldValues[i]=t,"mw-editor-title":e.fieldDefs[i].name,"eic-visible-textarea-rows":20,onEicValSet:t=>e.setFieldValue(i,t),onMwExitEditMode:t[2]||(t[2]=t=>e.$emit("mw-update-size")),onMwEnterEditMode:t[3]||(t[3]=t=>e.$emit("mw-update-size"))},null,8,["mwDisabled","modelValue","onUpdate:modelValue","mw-editor-title","onEicValSet"])])],2112))])))),128))])])))),128)),(0,n.kq)(" Fields "),e.displayedFieldIds.length>0?((0,n.wg)(),(0,n.iD)("div",h,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.displayedFieldIds,(i=>((0,n.wg)(),(0,n.iD)("div",{class:"field-row",key:"entity-expanded-"+i},[(0,n.kq)(" Non-textareas split the width between the field name and value "),"Text Editor"!==e.fieldDefs[i].type?((0,n.wg)(),(0,n.iD)("div",x,[(0,n._)("div",b,(0,a.zw)(e.fieldDefs[i].name),1),(0,n.Wm)(z,{class:"field-component-col",mwDisabled:!e.canEditBoardContents,eicFieldDef:e.fieldDefs[i],possibleValueCounts:e.activeFieldValueCounts[i],keyPrefix:"expandedentity-",onEicValSet:t=>e.setFieldValue(i,t)},null,8,["mwDisabled","eicFieldDef","possibleValueCounts","onEicValSet"])])):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.kq)(" Textareas take up the full width for maximum awesomeness displaying. "),(0,n._)("div",null,[(0,n.Wm)(V,{mwDisabled:!e.canEditBoardContents,modelValue:e.entityCopy.fieldValues[i],"onUpdate:modelValue":t=>e.entityCopy.fieldValues[i]=t,"mw-editor-title":e.fieldDefs[i].name,"eic-visible-textarea-rows":20,onEicValSet:t=>e.setFieldValue(i,t),onMwExitEditMode:t[4]||(t[4]=t=>e.$emit("mw-update-size")),onMwEnterEditMode:t[5]||(t[5]=t=>e.$emit("mw-update-size"))},null,8,["mwDisabled","modelValue","onUpdate:modelValue","mw-editor-title","onEicValSet"])])],2112))])))),128))])):(0,n.kq)("v-if",!0),0===e.displayedFieldIds.length&&0===e.displayedClassificationIds.length?((0,n.wg)(),(0,n.iD)("div",k," This block has nothing extra to display. Consider adding some classifications with fields to view them here. ")):(0,n.kq)("v-if",!0)])}]])},61073:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var n=i(66252),a=i(3577);const l=["x1","y1","x2","y2"],o=["x1","y1","x2","y2"],s=[(0,n._)("circle",{r:"15",cx:"0",cy:"0"},null,-1),(0,n._)("line",{x1:"-7",y1:"-7",x2:"7",y2:"7"},null,-1),(0,n._)("line",{x1:"-7",y1:"7",x2:"7",y2:"-7"},null,-1)],d=[(0,n._)("circle",{r:"15",cx:"0",cy:"0"},null,-1),(0,n._)("line",{x1:"-7",y1:"-7",x2:"7",y2:"7"},null,-1),(0,n._)("line",{x1:"-7",y1:"7",x2:"7",y2:"-7"},null,-1)];var r=i(1031),c=i(68952),u=i(80954);const p=(0,n.aZ)({props:{eicSkipTween:Boolean,eicScale:Number,myDepthScale:{type:Number,default:1},source:Object,destination:Object,tempShift:Object,tempResize:Object},setup(e){let t=(0,c.F)(),i=(0,u.$)();function a(e,t,i,n){let a=(-e.y+t.y)/(e.x-t.x);return-n/2<=a*i/2&&a*i/2<=n/2?e.x>=t.x?{x:t.x+i/2,y:t.y-a*i/2}:{x:t.x-i/2,y:t.y+a*i/2}:e.y>=t.y?{x:t.x-n/2/a,y:t.y+n/2}:{x:t.x+n/2/a,y:t.y-n/2}}return{entityStyle:(0,n.Fl)((()=>{let t={};return t.strokeWidth=4/e.myDepthScale,t})),lineStart:(0,n.Fl)((()=>{let t={x:e.source.x,y:e.source.y};if(e.source.isSelected){let i=e.eicScale?e.eicScale:1;t.x+=(e.tempShift.deltaX+e.tempResize.deltaX+e.tempResize.deltaWidth/2)/i,t.y+=(e.tempShift.deltaY+e.tempResize.deltaY+e.tempResize.deltaHeight/2)/i}return t})),lineStop:(0,n.Fl)((()=>{let t={x:e.destination.x,y:e.destination.y};if(e.destination.isSelected){let i=e.eicScale?e.eicScale:1;t.x+=(e.tempShift.deltaX+e.tempResize.deltaX+e.tempResize.deltaWidth/2)/i,t.y+=(e.tempShift.deltaY+e.tempResize.deltaY+e.tempResize.deltaHeight/2)/i}return t})),sourceEntityEdge:(0,n.Fl)((()=>{var t,i,n,l,o,s;return a({x:null===(t=e.destination)||void 0===t?void 0:t.x,y:null===(i=e.destination)||void 0===i?void 0:i.y},{x:null===(n=e.source)||void 0===n?void 0:n.x,y:null===(l=e.source)||void 0===l?void 0:l.y},(null===(o=e.source)||void 0===o?void 0:o.entityWidth)+18/e.myDepthScale,(null===(s=e.source)||void 0===s?void 0:s.entityHeight)+18/e.myDepthScale)})),destinationEntityEdge:(0,n.Fl)((()=>{var t,i,n,l,o,s;return a({x:null===(t=e.source)||void 0===t?void 0:t.x,y:null===(i=e.source)||void 0===i?void 0:i.y},{x:null===(n=e.destination)||void 0===n?void 0:n.x,y:null===(l=e.destination)||void 0===l?void 0:l.y},(null===(o=e.destination)||void 0===o?void 0:o.entityWidth)+18/e.myDepthScale,(null===(s=e.destination)||void 0===s?void 0:s.entityHeight)+18/e.myDepthScale)})),isSelected:(0,n.Fl)((()=>e.source.isSelected&&e.destination.isSelected)),isEitherSelected:(0,n.Fl)((()=>e.source.isSelected||e.destination.isSelected)),deleteLink:function(){i.setParent(e.destination.entityId,void 0),new r.e(t.rawState.currentViewData.boardId,e.destination.entityId,void 0).send()}}}});var w=i(93379),y=i.n(w),m=i(7795),g=i.n(m),v=i(90569),f=i.n(v),h=i(3565),x=i.n(h),b=i(19216),k=i.n(b),E=i(44589),D=i.n(E),S=i(47873),T={};T.styleTagTransform=D(),T.setAttributes=x(),T.insert=f().bind(null,"head"),T.domAPI=g(),T.insertStyleElement=k(),y()(S.Z,T),S.Z&&S.Z.locals&&S.Z.locals;const C=(0,i(83744).Z)(p,[["render",function(e,t,i,r,c,u){return(0,n.wg)(),(0,n.iD)("g",{class:(0,a.C_)(["mw-app-relationship-link",{selected:e.isSelected}]),"data-test":"link"},[(0,n.kq)(' This thick, invisible line is to make it easier to trigger the "hover" '),(0,n._)("line",{class:"invisible-line",style:(0,a.j5)({strokeWidth:20/e.myDepthScale}),x1:e.lineStart.x,y1:e.lineStart.y,x2:e.lineStop.x,y2:e.lineStop.y},null,12,l),(0,n._)("line",{class:"connecting-line",style:(0,a.j5)(e.entityStyle),x1:e.lineStart.x,y1:e.lineStart.y,x2:e.lineStop.x,y2:e.lineStop.y},null,12,o),e.source.entityId?((0,n.wg)(),(0,n.iD)("g",{key:0,class:"delete-circle","data-test":"link-delete-circle-source",onClick:t[0]||(t[0]=(...t)=>e.deleteLink&&e.deleteLink(...t)),style:(0,a.j5)({transform:`translate(${e.sourceEntityEdge.x}px, ${e.sourceEntityEdge.y}px) scale(${.6/e.myDepthScale})`})},s,4)):(0,n.kq)("v-if",!0),e.destination.entityId?((0,n.wg)(),(0,n.iD)("g",{key:1,class:"delete-circle","data-test":"link-delete-circle-destination",onClick:t[1]||(t[1]=(...t)=>e.deleteLink&&e.deleteLink(...t)),style:(0,a.j5)({transform:`translate(${e.destinationEntityEdge.x}px, ${e.destinationEntityEdge.y}px) scale(${.6/e.myDepthScale})`})},d,4)):(0,n.kq)("v-if",!0)],2)}]])},93175:(e,t,i)=>{i.r(t),i.d(t,{default:()=>D});var n=i(66252),a=i(3577),l=i(49963);const o={class:"mw-app-relationship-textcontent"};var s=i(2262),d=i(74169);const r=(0,n.aZ)({emits:["editcomplete"],props:{entityData:Object,entityStyle:Object,inEditMode:Boolean},setup(e,t){(0,d.q)();let i=(0,s.iH)(e.entityData.text),a=(0,s.iH)(null),l=(0,n.Fl)((()=>{var t;return{color:null===(t=e.entityStyle)||void 0===t?void 0:t.color}}));(0,n.YP)((()=>e.entityData.text),((e,t)=>{i.value=e}));let o=(0,s.iH)(!0),r=e=>{setTimeout((()=>{e&&null!==a.value&&(a.value.focus(),o.value=!1)}),0)};function c(e){o.value||(o.value=!0,t.emit("editcomplete",{cancelled:e,editEvent:{type:"text",data:{text:i.value}}}))}return(0,n.YP)((()=>e.inEditMode),((e,t)=>{r(e)})),r(e.inEditMode),{editText:i,textareaRef:a,textStyle:l,completeEdit:c,checkForEditCompletion:e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&(e.preventDefault(),c(!0)):(e.preventDefault(),c(!1))}}}});var c=i(93379),u=i.n(c),p=i(7795),w=i.n(p),y=i(90569),m=i.n(y),g=i(3565),v=i.n(g),f=i(19216),h=i.n(f),x=i(44589),b=i.n(x),k=i(67819),E={};E.styleTagTransform=b(),E.setAttributes=v(),E.insert=m().bind(null,"head"),E.domAPI=w(),E.insertStyleElement=h(),u()(k.Z,E),k.Z&&k.Z.locals&&k.Z.locals;const D=(0,i(83744).Z)(r,[["render",function(e,t,i,s,d,r){return(0,n.wg)(),(0,n.iD)("div",o,[e.inEditMode?(0,n.wy)(((0,n.wg)(),(0,n.iD)("textarea",{key:0,ref:"textareaRef","data-test":"edit-textarea","onUpdate:modelValue":t[0]||(t[0]=t=>e.editText=t),style:(0,a.j5)(e.textStyle),onKeydown:t[1]||(t[1]=(...t)=>e.checkForEditCompletion&&e.checkForEditCompletion(...t)),onBlur:t[2]||(t[2]=t=>e.completeEdit(!0))},null,36)),[[l.nr,e.editText]]):((0,n.wg)(),(0,n.iD)("pre",{key:1,style:(0,a.j5)(e.textStyle)},(0,a.zw)(e.entityData.text),5))])}]])},90807:(e,t,i)=>{i.r(t),i.d(t,{default:()=>k});var n=i(66252);const a={class:"mw-app-relationship"};var l=i(50432),o=i(80954);const s=(0,n.aZ)({setup(){const e=(0,l.V)(),t=(0,o.$)();return{entities:e.visibleEntities(),links:t.visibleLinkPairs(),selectedEntityIds:e.selectedEntityIds(),selectedEntities:e.selectedEntities()}}});var d=i(93379),r=i.n(d),c=i(7795),u=i.n(c),p=i(90569),w=i.n(p),y=i(3565),m=i.n(y),g=i(19216),v=i.n(g),f=i(44589),h=i.n(f),x=i(73154),b={};b.styleTagTransform=h(),b.setAttributes=m(),b.insert=w().bind(null,"head"),b.domAPI=u(),b.insertStyleElement=v(),r()(x.Z,b),x.Z&&x.Z.locals&&x.Z.locals;const k=(0,i(83744).Z)(s,[["render",function(e,t,i,l,o,s){const d=(0,n.up)("eic-app-configpane"),r=(0,n.up)("eic-canvas");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(d,{"mw-selected-blocks":e.selectedEntities,"mw-selected-block-ids":e.selectedEntityIds,"mw-show-alignment-controls":!0,"mw-show-after-number-selected":2},null,8,["mw-selected-blocks","mw-selected-block-ids"]),(0,n.Wm)(r,{"eic-entities":e.entities,"eic-links":e.links},null,8,["eic-entities","eic-links"])])}]])},60938:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Z});var n=i(66252),a=i(3577);const l={class:"mwe-view-config-section"},o={class:"mwe-config-tabs"},s=(0,n._)("span",null,"Configuration",-1),d={class:"mwe-view-config"},r={class:"mwe-config-content"},c=(0,n._)("h3",{class:"mwe-config-heading mwm-inline"},"View Name",-1),u=(0,n._)("h3",{class:"mwe-config-heading"},"Include blocks which...",-1),p={key:0,class:"mwe-view-save-button-wrapper"},w={class:"mwe-view-save-buttons"};var y=i(2262),m=i(44586),g=i(74094),v=i(68952),f=i(74169),h=i(19266),x=i(65108),b=i(89809),k=i(41367),E=i(52433);const D=(0,n.aZ)({emits:["viewClosed","viewOpened"],props:{},setup(e,t){const i=(0,g.N)(),a=(0,v.F)(),l=(0,f.q)();let{canEditBoardContents:o}=(0,h.T)(),s=i.activeViewConfig(),d=(0,y.iH)(!1),r=(0,y.iH)(!1);(0,n.YP)(s,(e=>{e&&t.emit("viewOpened")}));let c=(0,y.iH)(null),u=(0,y.iH)(!1),p=null;function w(e){return"id"in e&&delete e.id,"type"in e&&delete e.type,e}function D(){s.value&&(0,E.wy)(p,w(JSON.parse(JSON.stringify(s.value))))}function S(){D(),r.value=!1,d.value=!1,t.emit("viewClosed"),setTimeout((()=>i.closeCurrentView()),500)}function T(){var e;let t=null===(e=a.rawState.currentViewData)||void 0===e?void 0:e.boardId;t&&s.value&&(0,k.k$)(s.value)&&new x.w(t,s.value).send()}return(0,n.bv)((()=>{(0,n.YP)(s,(()=>{void 0!==s.value?(r.value=!0,p&&D(),p=w(JSON.parse(JSON.stringify(s.value))),0===s.value.name.trim().length?(d.value=!0,setTimeout((()=>c.value.$el.getElementsByTagName("input")[0].focus()),0),u.value=!0):u.value=!1):p=null})),l.register("viewContainerClose","closeView",(e=>{var t;(null===(t=s.value)||void 0===t?void 0:t.id)===e&&S()}))})),(0,n.Ah)((()=>{l.deregister("viewContainerClose")})),{currentView:s,showConfiguration:d,showView:r,isNewView:u,canEditBoardContents:o,viewNameRef:c,closeView:S,saveView:T,saveAsNewView:function(){s.value&&(s.value.id=(0,m.Z)(),T())},deleteView:function(){var e;let t=null===(e=a.rawState.currentViewData)||void 0===e?void 0:e.boardId;t&&s.value&&(r.value=!1,d.value=!1,setTimeout((()=>{t&&s.value&&new b.h(t,s.value.id).send()}),500))}}}});var S=i(93379),T=i.n(S),C=i(7795),z=i.n(C),V=i(90569),B=i.n(V),I=i(3565),O=i.n(I),M=i(19216),F=i.n(M),j=i(44589),_=i.n(j),N=i(46011),q={};q.styleTagTransform=_(),q.setAttributes=O(),q.insert=B().bind(null,"head"),q.domAPI=z(),q.insertStyleElement=F(),T()(N.Z,q),N.Z&&N.Z.locals&&N.Z.locals;const Z=(0,i(83744).Z)(D,[["render",function(e,t,i,y,m,g){const v=(0,n.up)("eic-svg-doublearrow"),f=(0,n.up)("eic-textbox"),h=(0,n.up)("eic-filter-chain-config");return(0,n.wg)(),(0,n.iD)("div",{class:(0,a.C_)(["mw-app-viewcontainer",{"is-open":e.showView}])},[e.currentView?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.kq)(" View Contents "),((0,n.wg)(),(0,n.j4)((0,n.LL)(`eic-${e.currentView.type.toLowerCase()}-contents`),{class:"mwe-view-contents-section",onMwCloseView:t[0]||(t[0]=t=>e.closeView())})),(0,n.kq)(" View Configuration "),(0,n._)("div",{class:(0,a.C_)(["mwe-view-config-wrapper",{"is-visible":e.showConfiguration}])},[(0,n._)("div",l,[(0,n.kq)(" Navigation Tabs "),(0,n._)("div",o,[(0,n._)("div",{class:"mwe-config-tab",onClick:t[1]||(t[1]=t=>e.closeView())}," Back to Mind Map "),(0,n._)("div",{class:"mwe-config-tab",onClick:t[2]||(t[2]=t=>e.showConfiguration=!e.showConfiguration)},[s,(0,n.Wm)(v,{height:"13",class:(0,a.C_)({"is-rotated":!e.showConfiguration})},null,8,["class"])])]),(0,n._)("div",d,[(0,n.kq)(" Left-Side Config "),(0,n._)("div",r,[(0,n._)("div",null,[c,(0,n.Wm)(f,{ref:"viewNameRef",modelValue:e.currentView.name,"onUpdate:modelValue":t[3]||(t[3]=t=>e.currentView.name=t)},null,8,["modelValue"])]),(0,n.kq)(" View-specific config "),((0,n.wg)(),(0,n.j4)((0,n.LL)(`eic-${e.currentView.type.toLowerCase()}-config`),{mwView:e.currentView},null,8,["mwView"])),(0,n._)("div",null,[u,(0,n.Wm)(h,{mwFilterChain:e.currentView.filter},null,8,["mwFilterChain"])])]),e.canEditBoardContents?((0,n.wg)(),(0,n.iD)("div",p,[(0,n._)("div",w,[e.isNewView?(0,n.kq)("v-if",!0):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"red tertiary",onClick:t[4]||(t[4]=t=>e.deleteView())},"Delete view")),e.isNewView?(0,n.kq)("v-if",!0):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"pink tertiary",onClick:t[5]||(t[5]=t=>e.saveAsNewView())},"Save as new view")),(0,n._)("button",{class:"pink primary",onClick:t[6]||(t[6]=t=>e.saveView())},(0,a.zw)(e.isNewView?"Save view":"Save (overwrite existing)"),1)])])):(0,n.kq)("v-if",!0)])])],2)],64)):(0,n.kq)("v-if",!0)],2)}]])}}]);